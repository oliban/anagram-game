<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anagram Game - Monitoring Dashboard</title>
    <link rel="stylesheet" href="/shared/shared.css">
    <link rel="stylesheet" href="/monitoring/monitoring.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Game Activity Monitor</h1>
            <p>Real-time game activity tracking and statistics</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="online-players">0</div>
                <div class="stat-label">Players Online</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="active-phrases">0</div>
                <div class="stat-label">Created Phrases (24h)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="phrases-today">0</div>
                <div class="stat-label">Phrases Today</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completion-rate">0%</div>
                <div class="stat-label">Completion Rate</div>
            </div>
        </div>

        <div class="card">
            <h2>Phrase Inventory Status</h2>
            
            <!-- Overall Difficulty Breakdown -->
            <div class="inventory-section">
                <h3>By Difficulty Level</h3>
                <div class="inventory-grid">
                    <div class="inventory-card very-easy">
                        <div class="inventory-number" id="phrases-very-easy">0</div>
                        <div class="inventory-label">Very Easy (â‰¤20)</div>
                    </div>
                    <div class="inventory-card easy">
                        <div class="inventory-number" id="phrases-easy">0</div>
                        <div class="inventory-label">Easy (21-40)</div>
                    </div>
                    <div class="inventory-card medium">
                        <div class="inventory-number" id="phrases-medium">0</div>
                        <div class="inventory-label">Medium (41-60)</div>
                    </div>
                    <div class="inventory-card hard">
                        <div class="inventory-number" id="phrases-hard">0</div>
                        <div class="inventory-label">Hard (61-80)</div>
                    </div>
                    <div class="inventory-card very-hard">
                        <div class="inventory-number" id="phrases-very-hard">0</div>
                        <div class="inventory-label">Very Hard (>80)</div>
                    </div>
                </div>
            </div>

            <!-- Compact Language Breakdown -->
            <div class="inventory-section">
                <h3>By Language</h3>
                <div class="language-inventory-compact">
                    <div class="language-compact-item" id="lang-en-compact">
                        <div class="language-compact-header">
                            <span class="language-flag">ðŸ‡¬ðŸ‡§</span>
                            <span class="language-name">English</span>
                            <span class="language-total-compact" id="lang-en-total">0</span>
                        </div>
                        <div class="language-breakdown-compact">
                            <span class="breakdown-compact" id="lang-en-veryEasy">0</span>
                            <span class="breakdown-compact" id="lang-en-easy">0</span>
                            <span class="breakdown-compact" id="lang-en-medium">0</span>
                            <span class="breakdown-compact" id="lang-en-hard">0</span>
                            <span class="breakdown-compact" id="lang-en-veryHard">0</span>
                        </div>
                    </div>
                    
                    <div class="language-compact-item" id="lang-sv-compact">
                        <div class="language-compact-header">
                            <span class="language-flag">ðŸ‡¸ðŸ‡ª</span>
                            <span class="language-name">Swedish</span>
                            <span class="language-total-compact" id="lang-sv-total">0</span>
                        </div>
                        <div class="language-breakdown-compact">
                            <span class="breakdown-compact" id="lang-sv-veryEasy">0</span>
                            <span class="breakdown-compact" id="lang-sv-easy">0</span>
                            <span class="breakdown-compact" id="lang-sv-medium">0</span>
                            <span class="breakdown-compact" id="lang-sv-hard">0</span>
                            <span class="breakdown-compact" id="lang-sv-veryHard">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h2>Live Activity Feed</h2>
                <div class="activity-controls">
                    <div class="control-group">
                        <button class="btn btn-secondary" id="clear-feed">Clear Feed</button>
                        <button class="btn btn-secondary" id="toggle-auto-scroll">
                            <span id="auto-scroll-text">Auto-scroll: ON</span>
                        </button>
                    </div>
                    <div class="filter-controls">
                        <div class="filter-group">
                            <label class="form-label">Event Types:</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="filter-player" checked>
                                    Player
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="filter-phrase" checked>
                                    Phrase
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="filter-game" checked>
                                    Game
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="filter-system" checked>
                                    System
                                </label>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label class="form-label">Time Range:</label>
                            <select class="form-select" id="time-range">
                                <option value="all">All Time</option>
                                <option value="1h">Last Hour</option>
                                <option value="24h" selected>Last 24 Hours</option>
                                <option value="7d">Last 7 Days</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="activity-feed" id="activity-feed">
                    <div class="loading">
                        <div class="spinner"></div>
                        <span>Connecting to activity stream...</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Current Game State</h2>
                <div class="game-state-section">
                    <h3>Online Players</h3>
                    <div id="players-list" class="players-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            <span>Loading players...</span>
                        </div>
                    </div>
                </div>
                <div class="game-state-section">
                    <h3>Players Nearing Phrase Depletion</h3>
                    <div id="depletion-list" class="depletion-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            <span>Loading player depletion data...</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Recent Phrases</h2>
                <div id="phrases-list" class="phrases-list recent-phrases-expanded">
                    <div class="loading">
                        <div class="spinner"></div>
                        <span>Loading phrases...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/shared/api-client.js"></script>
    <script src="/monitoring/monitoring.js"></script>
</body>
</html>