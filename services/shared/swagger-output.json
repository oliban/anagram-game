{
  "swagger": "2.0",
  "info": {
    "version": "2.0.0",
    "title": "Wordshelf Multiplayer API",
    "description": "\n      Comprehensive API for Wordshelf multiplayer word game server.\n      \n      ## Features\n      - **Player Management**: Registration, authentication, online status\n      - **Phrase System**: Create, retrieve, complete custom and global phrases  \n      - **Real-time Communication**: WebSocket support for multiplayer features\n      - **Scoring & Leaderboards**: Advanced scoring system with multiple leaderboard types\n      - **Security**: Rate limiting, input validation, CORS protection\n      - **Multi-language Support**: English and Swedish phrase support\n      \n      ## Environment Configuration\n      - **Development**: http://192.168.1.188:3000 (local development server)\n      - **Staging**: https://unfortunately-versions-assumed-threat.trycloudflare.com (Pi staging with Cloudflare)  \n      - **Production**: http://anagram-staging-alb-1354034851.eu-west-1.elb.amazonaws.com (AWS production)\n      \n      ## Authentication\n      Some endpoints require API key authentication via X-API-Key header.\n      \n      ## Rate Limits\n      - General API: 120 requests/15min (dev), 30 requests/15min (prod)\n      - Sensitive endpoints: 100 requests/15min (dev), 10 requests/15min (prod)\n      \n      ## WebSocket Events\n      - **Game namespace** (/): Open for all clients\n      - **Monitoring namespace** (/monitoring): Requires API key authentication\n    ",
    "contact": {
      "name": "Wordshelf API Support",
      "email": "support@wordshelf.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "host": "192.168.1.188:3000",
  "basePath": "/",
  "tags": [
    {
      "name": "System",
      "description": "Server health and configuration endpoints"
    },
    {
      "name": "Players",
      "description": "Player registration, authentication, and management"
    },
    {
      "name": "Phrases",
      "description": "Phrase creation, retrieval, completion, and management"
    },
    {
      "name": "Leaderboards",
      "description": "Player rankings and scoring statistics"
    },
    {
      "name": "Contributions",
      "description": "Community phrase contribution system"
    },
    {
      "name": "Debug",
      "description": "Development and debugging utilities"
    },
    {
      "name": "Admin",
      "description": "Administrative operations (requires API key)"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "securityDefinitions": {
    "ApiKeyAuth": {
      "type": "apiKey",
      "in": "header",
      "name": "X-API-Key",
      "description": "API key for admin endpoints"
    }
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/players/register": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "name": {
                  "example": "any"
                },
                "deviceId": {
                  "example": "any"
                },
                "socketId": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "409": {
            "description": "Conflict"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/players/online": {
      "get": {
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/players/legends": {
      "get": {
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/scores/player/{playerId}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/stats": {
      "get": {
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/phrases/create": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "contributorName": {
                  "example": "any"
                },
                "content": {
                  "example": "any"
                },
                "hint": {
                  "example": "any"
                },
                "senderId": {
                  "example": "any"
                },
                "targetId": {
                  "example": "any"
                },
                "targetIds": {
                  "example": "any"
                },
                "isGlobal": {
                  "example": "any"
                },
                "difficultyLevel": {
                  "example": "any"
                },
                "phraseType": {
                  "example": "any"
                },
                "language": {
                  "example": "any"
                },
                "theme": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/phrases/for/{playerId}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "level",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/phrases/{phraseId}/complete": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "phraseId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "rows",
            "in": "query",
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "playerId": {
                  "example": "any"
                },
                "hintsUsed": {
                  "example": "any"
                },
                "completionTime": {
                  "example": "any"
                },
                "celebrationEmojis": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "409": {
            "description": "Conflict"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/phrases/{phraseId}/consume": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "phraseId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/phrases/{phraseId}/skip": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "phraseId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "playerId": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/phrases/analyze-difficulty": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "phrase": {
                  "example": "any"
                },
                "language": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/leaderboard/{period}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "period",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "limit",
            "in": "query",
            "type": "string"
          },
          {
            "name": "offset",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/leaderboard/{type}/player/{playerId}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "playerId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/api/contribution/status": {
      "get": {
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/contribute/{token}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/contribution/{token}": {
      "get": {
        "description": "",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/contribution/{token}/submit": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "phrase": {
                  "example": "any"
                },
                "theme": {
                  "example": "any"
                },
                "clue": {
                  "example": "any"
                },
                "language": {
                  "example": "any"
                },
                "contributorName": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/contribution/request": {
      "post": {
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "playerId": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    }
  },
  "definitions": {
    "Error": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "example": "object"
        },
        "properties": {
          "type": "object",
          "properties": {
            "error": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "description": {
                  "type": "string",
                  "example": "Error message"
                }
              }
            },
            "details": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "array"
                },
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "example": "object"
                    }
                  }
                },
                "description": {
                  "type": "string",
                  "example": "Detailed error information"
                }
              }
            }
          }
        },
        "required": {
          "type": "array",
          "example": [
            "error"
          ],
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Player": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "example": "object"
        },
        "properties": {
          "type": "object",
          "properties": {
            "id": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "format": {
                  "type": "string",
                  "example": "uuid"
                },
                "description": {
                  "type": "string",
                  "example": "Unique player identifier"
                }
              }
            },
            "name": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "minLength": {
                  "type": "number",
                  "example": 1
                },
                "maxLength": {
                  "type": "number",
                  "example": 50
                },
                "pattern": {
                  "type": "string",
                  "example": "^[a-zA-Z0-9\\s\\-_åäöÅÄÖ]{1,50}$"
                },
                "description": {
                  "type": "string",
                  "example": "Player display name"
                }
              }
            },
            "isOnline": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "boolean"
                },
                "description": {
                  "type": "string",
                  "example": "Current online status"
                }
              }
            },
            "language": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "enum": {
                  "type": "array",
                  "example": [
                    "en",
                    "sv"
                  ],
                  "items": {
                    "type": "string"
                  }
                },
                "description": {
                  "type": "string",
                  "example": "Player preferred language"
                }
              }
            },
            "createdAt": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "format": {
                  "type": "string",
                  "example": "date-time"
                },
                "description": {
                  "type": "string",
                  "example": "Account creation timestamp"
                }
              }
            },
            "totalScore": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "integer"
                },
                "minimum": {
                  "type": "number",
                  "example": 0
                },
                "description": {
                  "type": "string",
                  "example": "Total accumulated score"
                }
              }
            }
          }
        },
        "required": {
          "type": "array",
          "example": [
            "id",
            "name",
            "isOnline"
          ],
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Phrase": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "example": "object"
        },
        "properties": {
          "type": "object",
          "properties": {
            "id": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "integer"
                },
                "description": {
                  "type": "string",
                  "example": "Unique phrase identifier"
                }
              }
            },
            "content": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "minLength": {
                  "type": "number",
                  "example": 1
                },
                "maxLength": {
                  "type": "number",
                  "example": 500
                },
                "pattern": {
                  "type": "string",
                  "example": "^[a-zA-Z0-9\\s\\-_.,!?'\"()åäöÅÄÖ]*$"
                },
                "description": {
                  "type": "string",
                  "example": "The phrase text to unscramble"
                }
              }
            },
            "hint": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "maxLength": {
                  "type": "number",
                  "example": 1000
                },
                "description": {
                  "type": "string",
                  "example": "Optional hint for the phrase"
                }
              }
            },
            "language": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "enum": {
                  "type": "array",
                  "example": [
                    "en",
                    "sv"
                  ],
                  "items": {
                    "type": "string"
                  }
                },
                "description": {
                  "type": "string",
                  "example": "Phrase language"
                }
              }
            },
            "difficultyLevel": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "integer"
                },
                "minimum": {
                  "type": "number",
                  "example": 1
                },
                "maximum": {
                  "type": "number",
                  "example": 100
                },
                "description": {
                  "type": "string",
                  "example": "Calculated difficulty level"
                }
              }
            },
            "senderName": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "description": {
                  "type": "string",
                  "example": "Name of player who sent this phrase"
                }
              }
            },
            "isGlobal": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "boolean"
                },
                "description": {
                  "type": "string",
                  "example": "Whether phrase is available globally"
                }
              }
            },
            "createdAt": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "format": {
                  "type": "string",
                  "example": "date-time"
                },
                "description": {
                  "type": "string",
                  "example": "Creation timestamp"
                }
              }
            }
          }
        },
        "required": {
          "type": "array",
          "example": [
            "id",
            "content",
            "language",
            "difficultyLevel"
          ],
          "items": {
            "type": "string"
          }
        }
      }
    },
    "LeaderboardEntry": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "example": "object"
        },
        "properties": {
          "type": "object",
          "properties": {
            "playerId": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "format": {
                  "type": "string",
                  "example": "uuid"
                }
              }
            },
            "playerName": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                }
              }
            },
            "score": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "integer"
                },
                "minimum": {
                  "type": "number",
                  "example": 0
                }
              }
            },
            "rank": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "integer"
                },
                "minimum": {
                  "type": "number",
                  "example": 1
                }
              }
            }
          }
        },
        "required": {
          "type": "array",
          "example": [
            "playerId",
            "playerName",
            "score",
            "rank"
          ],
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}